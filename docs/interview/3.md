### 作用域和作用域链

#### 是什么【本质】

就是代码的执行环境，所以可以把他看成是一个**对象**，这个对象中保存着代码执行所需要的变量(**形参，this，内部声明的变量**)。在js中，分为**全局作用域** 和 **函数作用域**，es6新增了一个**块级作用域**。

::: warning 全局作用域
在浏览器端-全局作用域对象指向`window`，在服务器端node-全局作用域对象指向`global`。
:::

#### 怎么做【原理】

函数在执行的时候，也叫做**进入执行环境**，会把函数体内`var`和`funtion`声明的变量，`形参变量`，`this对象`，保存在**一个对象（作用域对象）**中，然后继续执行，当再遇到函数执行，就进入函数内部也就是**再次进去执行环境**，后面同上。如此反复，就创建了**多个作用域对象**，这些作用域对象保存在`[[scope]]`中。注意在函数执行过程中，访问的变量在当前作用域对象找不到，就会向**上层作用域对象**去找，如此反复【这就形成了**作用域链**】，如果在最外层作用域对象都找到，就会抛出错误。

::: tip 注意

- 进行执行环境也就是创建当前函数的作用域对象。

- 函数执行完，垃圾回收站会把没有被引用的变量进行回收。
  :::